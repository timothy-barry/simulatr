<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="simulatr">
<title>simulatr on a cluster or cloud • simulatr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="simulatr on a cluster or cloud">
<meta property="og:description" content="simulatr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">simulatr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/simulatr.html">Get started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/example-local.html">simulatr on your laptop</a>
    <a class="dropdown-item" href="../articles/example-remote.html">simulatr on a cluster or cloud</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>simulatr on a cluster or cloud</h1>
            
      
      
      <div class="d-none name"><code>example-remote.Rmd</code></div>
    </div>

    
    
<p>If you have access to a distributed computing platform (e.g. a
computer cluster provided by your university or a cloud computing
service like AWS), then you can easily move your <code>simulatr</code>
simulation from your laptop to this platform.</p>
<div class="section level2">
<h2 id="create-a-working-simulatr-specifier-object">1-3. Create a working <code>simulatr</code> specifier object<a class="anchor" aria-label="anchor" href="#create-a-working-simulatr-specifier-object"></a>
</h2>
<p>The <em>same</em> <code>simulatr</code> specifier object you <a href="https://katsevich-lab.github.io/simulatr/articles/example-local.html" class="external-link">created
on your laptop</a> can be used on your distributed computing platform!
Please read the “<code>simulatr</code> on your laptop” article (linked
above) if you have not done so already. Once you have a
<code>simulatr</code> specifier object you are happy with, save it to
disk using a command like the following:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span>object <span class="op">=</span> <span class="va">simulatr_spec</span>, file <span class="op">=</span> <span class="va">simulatr_spec_filename</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="run-the-simulation-on-your-distributed-computing-platform">4. Run the simulation on your distributed computing platform<a class="anchor" aria-label="anchor" href="#run-the-simulation-on-your-distributed-computing-platform"></a>
</h2>
<p>Running <code>simulatr</code> on a distributed computing platform is
facilitated by a <a href="https://nextflow.io" class="external-link">Nextflow</a> pipeline, <a href="https://github.com/Katsevich-Lab/simulatr-pipeline" class="external-link"><code>Katsevich-Lab/simulatr-pipeline</code></a>.
This pipeline takes as inputs the <code>simulatr</code> specifier file
created in steps 1-3, as well as the desired limits on the the memory
and time usage of each individual process. It then adaptively
parallelizes the simulation tasks accordingly, splitting the replicates
for each combination of method and parameter setting into one or more
processes.</p>
<p>Below are instructions for running this pipeline on your distributed
computing platform.</p>
<div class="section level3">
<h3 id="a--install-and-configure-nextflow">A. Install and configure Nextflow<a class="anchor" aria-label="anchor" href="#a--install-and-configure-nextflow"></a>
</h3>
<p>Installing Nextflow is easy; follow the instructions <a href="https://nextflow.io/index.html#GetStarted" class="external-link">here</a>. Next, you
must <em>configure</em> Nextflow to work with your specific distributed
computing platform. To get familiar with Nextflow configuration, you can
read <a href="https://carpentries-incubator.github.io/workflows-nextflow/08-configuration/index.html" class="external-link">this
tutorial</a>, see <a href="https://github.com/nf-core/configs/tree/master/conf" class="external-link">this list</a>
of configuration files at other institutions, read <a href="https://www.nextflow.io/blog/2021/5_tips_for_hpc_users.html" class="external-link">5
Nextflow tips for HPC users</a> and <a href="https://www.nextflow.io/blog/2021/5-more-tips-for-nextflow-user-on-hpc.html" class="external-link">5
more Nextflow tips for HPC users</a>, and finally, consult the <a href="https://www.nextflow.io/docs/latest/config.html" class="external-link">Nextflow
documentation</a>.</p>
</div>
<div class="section level3">
<h3 id="b--download-the-simulatr-pipeline">B. Download the <code>simulatr</code> pipeline<a class="anchor" aria-label="anchor" href="#b--download-the-simulatr-pipeline"></a>
</h3>
<p>To make sure you have the latest version of the <code>simulatr</code>
pipeline, download it using the shell command</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">nextflow</span> pull katsevich-lab/simulatr-pipeline</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="c--run-the-simulatr-pipeline">C. Run the <code>simulatr</code> pipeline<a class="anchor" aria-label="anchor" href="#c--run-the-simulatr-pipeline"></a>
</h3>
<p>You can run the <code>simulatr</code> pipeline using a command like
the following:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">nextflow</span> run katsevich-lab/simulatr-pipeline <span class="dt">\</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="at">--simulatr_specifier_fp</span> /path/to/simspec/obj <span class="dt">\</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>  <span class="at">--result_dir</span> directory/for/results <span class="dt">\</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>  <span class="at">--result_file_name</span> <span class="st">"simulatr_result.rds"</span> <span class="dt">\</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>  <span class="at">--B_check</span> 5 <span class="dt">\</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>  <span class="at">--B</span> 100 <span class="dt">\</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>  <span class="at">--max_gb</span> 8 <span class="dt">\</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>  <span class="at">--max_hours</span> 4</span></code></pre></div>
<p>The command-line arguments are described below. Note that only the
first (<code>simulatr_specifier_fp</code>) is required; the rest have
sensible defaults, included in the following descriptions.</p>
<ul>
<li>
<code>simulatr_specifier_fp</code>: (Required) The path to the
<code>simulatr</code> specifier object saved at the end of steps 1-3
above.</li>
<li>
<code>result_dir</code>: (Optional) The directory in which to write
the output file. Defaults to the current working directory.</li>
<li>
<code>result_file_name</code>: (Optional) The name of the output
file. Defaults to <code>"simulatr_result.rds"</code>.</li>
<li>
<code>B_check</code>: (Optional) The number of initial simulation
replicates to run for each combination of method and parameter setting
in order to benchmark the memory and time required for adaptive
parallelization. Defaults to 5.</li>
<li>
<code>B</code>: (Optional) The number of simulation replicates to
run for the full simulation. Defaults to the value in the
<code>simulatr</code> specifier object. You may want to set
<code>B</code> to a small number during an initial trial run.</li>
<li>
<code>max_gb</code>: (Optional) The maximum number of GB each
process has available. This number is used in the adaptive
parallelization scheme. Defaults to 8.</li>
<li>
<code>max_hours</code>: (Optional) The maximum number of hours each
process can run for. This number is used in the adaptive parallelization
scheme. Defaults to 4.</li>
<li>
<code>time_fudge_factor</code>: a positive real number indicating
how liberal or conservative we should be in estimating the number of
processors to use for a given method-grid row pair. A number in the
interval (0,1) indicates that we should be <em>conservative</em> (i.e.,
request more processors than is probably necessary), while a number in
the interval <span class="math inline">\((1, \infty)\)</span> indicates
that we should be <em>liberal</em> (i.e., request fewer processors than
is probably necessary). The default is 0.8.</li>
<li>
<code>mem_fudge_factor</code>: Similar to
<code>time_fudge_factor</code>, but for memory.</li>
</ul>
<p>Upon successful completion of the pipeline, the results will be
written to disk in RDS format at the location requested. The results are
in the same format as returned by
<code><a href="../reference/check_simulatr_specifier_object.html">check_simulatr_specifier_object()</a></code>; see <a href="https://katsevich-lab.github.io/simulatr/articles/example-local.html" class="external-link">“simulatr
on your laptop”</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="summarize-andor-visualize-the-results">5. Summarize and/or visualize the results<a class="anchor" aria-label="anchor" href="#summarize-andor-visualize-the-results"></a>
</h2>
<p>Read the results from disk using <code><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS()</a></code>. The rest is
the same as in <a href="https://katsevich-lab.github.io/simulatr/articles/example-local.html" class="external-link">“simulatr
on your laptop”</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://timothy-barry.github.io/" class="external-link">Timothy Barry</a>, <a href="https://ekatsevi.github.io/" class="external-link">Eugene Katsevich</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
